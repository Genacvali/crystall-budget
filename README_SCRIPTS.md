# –°–∫—Ä–∏–ø—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö CrystalBudget

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã

### 1. `init_db.py` - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–π –ë–î
```bash
python init_db.py
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å –Ω—É–ª—è
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –≤—Å–µ 8 —Ç–∞–±–ª–∏—Ü –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
- ‚úÖ –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–æ–∑–¥–∞—Ç—å –¥–µ–º–æ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–µ–Ω –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ü—Ä–∏ –ø–µ—Ä–≤–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏–ª–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —á–∏—Å—Ç–æ–π –ë–î

### 2. `migrate_db.py` - –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ë–î
```bash
python migrate_db.py
```

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ë–î –¥–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π —Å—Ö–µ–º—ã
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏ `user_id`
- ‚úÖ –ü–µ—Ä–µ–Ω–æ—Å–∏—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:** –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ –ë–î

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤ –ë–î —Å–æ–¥–µ—Ä–∂–∏—Ç:

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- **users** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—Ä–æ—Ñ–∏–ª—è
- **categories** - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—é–¥–∂–µ—Ç–∞ (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ/–ø—Ä–æ—Ü–µ–Ω—Ç–Ω—ã–µ)
- **expenses** - –†–∞—Å—Ö–æ–¥—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **income_daily** - –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –¥–æ—Ö–æ–¥—ã
- **income** - –ú–µ—Å—è—á–Ω—ã–µ –¥–æ—Ö–æ–¥—ã (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:
- **income_sources** - –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–æ—Ö–æ–¥–∞
- **source_category_rules** - –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–æ—Ö–æ–¥–æ–≤
- **savings_goals** - –¶–µ–ª–∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–π
- **shared_budgets** - –°–µ–º–µ–π–Ω—ã–µ –±—é–¥–∂–µ—Ç—ã
- **shared_budget_members** - –£—á–∞—Å—Ç–Ω–∏–∫–∏ —Å–µ–º–µ–π–Ω—ã—Ö –±—é–¥–∂–µ—Ç–æ–≤
- **exchange_rates** - –ö—É—Ä—Å—ã –≤–∞–ª—é—Ç

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç:
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —á–∏—Å—Ç–æ–π –ë–î
python init_db.py

# –î–æ–±–∞–≤–∏—Ç—å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
# –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º —Å–∫—Ä–∏–ø—Ç–∞
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:
```bash
# –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–∞—Ä–æ–π –ë–î
python migrate_db.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
python init_db.py  # –ü–æ–∫–∞–∂–µ—Ç —Å—Ç–∞—Ç—É—Å –ë–î
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
python app.py

# –ü—Ä–æ–¥–∞–∫—à–Ω
gunicorn -w 2 -b 0.0.0.0:5000 app:app
```

## üõ†Ô∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "no such column: user_id"
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python migrate_db.py`

### –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Ç–∞–±–ª–∏—Ü—ã
**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ `python init_db.py`

### –û—à–∏–±–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª `budget.db` –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é

### –ú–æ–¥—É–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω (requests, flask, etc.)
**–†–µ—à–µ–Ω–∏–µ:** 
```bash
pip install -r requirements.txt
# –∏–ª–∏
pip install --user requests flask werkzeug
```

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ë–î

```bash
# –°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü
sqlite3 budget.db ".tables"

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã
sqlite3 budget.db ".schema users"

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
sqlite3 budget.db "SELECT COUNT(*) FROM users;"
```