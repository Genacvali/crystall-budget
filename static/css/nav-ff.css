/* ==== базовые переменные проекта уже существуют ==== */

.cb-nav-inner{ min-height: var(--cb-nav-height); }

/* ---------- Кристалл-логотип (Final Fantasy vibe) ---------- */
.ff-gem{
  position: relative;
  width: 14px; height: 22px;
  transform: skewY(-12deg) rotate(-2deg);
  border-radius: 3px;
  background:
    conic-gradient(from 210deg at 50% 50%, #a077ff, #6ea8fe, #4dd0ff, #a077ff);
  box-shadow:
    0 0 0 1px rgba(255,255,255,.10) inset,
    0 10px 24px rgba(110,168,254,.35),
    0 -8px 18px rgba(160,119,255,.35);
  display: inline-block;
}
.ff-gem::before, .ff-gem::after{
  content:""; position:absolute; inset:0; border-radius:3px; pointer-events:none;
}
/* внутренняя грань */
.ff-gem::before{
  clip-path: polygon(50% 5%, 95% 35%, 70% 95%, 30% 95%, 5% 35%);
  background: linear-gradient(180deg, rgba(255,255,255,.4), rgba(255,255,255,0));
  mix-blend-mode: screen; opacity:.8;
}
/* блик */
.ff-gem::after{
  top:-6px; left:-8px; right:-8px; bottom:-6px;
  background: radial-gradient(40% 40% at 20% 10%, rgba(255,255,255,.65), transparent 60%);
  filter: blur(6px); opacity:.7;
}

/* логотип-текст */
.ff-logo{
  letter-spacing:.2px;
  background: linear-gradient(90deg, #6ea8fe, #9b6bff);
  -webkit-background-clip:text; background-clip:text; color:transparent;
}

/* ========== ЕДИНАЯ НАВИГАЦИЯ ========== */

/* === ВЫСОТА НАВБАРА === */
.cb-nav-inner { 
  min-height: var(--cb-nav-height, 72px); 
}

/* === КОНТЕЙНЕР ТАБОВ === */
.ff-tabs {
  display: flex;                     /* единый источник структуры */
  gap: 12px;                         /* ЕДИНЫЙ источник расстояния между вкладками */
  background: rgba(255,255,255,.04);
  border: 1px solid var(--bs-border-color);
  border-radius: 14px;
  box-shadow: 0 6px 18px rgba(0,0,0,.18);
  padding: 6px;                      /* небольшое внутреннее пространство */
}

/* КРИТИЧНО: убираем ВСЕ внешние отступы */
.ff-tabs > *,
.ff-tabs .nav-item,
.ff-tabs .nav-link,
.ff-tabs .ff-pill { 
  margin: 0 !important; 
}

/* === ВКЛАДКИ === */
.ff-pill {
  /* ГЕОМЕТРИЯ — не изменяется НИКОГДА */
  display: inline-flex;
  align-items: center;
  gap: .5rem;                        /* выравнивание иконка+текст через gap */
  min-height: 44px;                  /* НЕИЗМЕННАЯ высота */
  padding: .5rem 1rem;               /* НЕИЗМЕННЫЕ паддинги во всех состояниях */
  border-radius: 12px;               /* НЕИЗМЕННЫЙ радиус */
  border: 1px solid transparent;     /* НЕИЗМЕННАЯ толщина границы */
  
  /* НЕИЗМЕННЫЕ ТИПОГРАФИЧЕСКИЕ ПАРАМЕТРЫ */
  font-weight: 600;                  /* ОДИНАКОВЫЙ font-weight во всех состояниях */
  line-height: 1.25;                 /* НЕИЗМЕННАЯ высота строки */
  letter-spacing: 0;                 /* НЕИЗМЕННЫЕ межбуквенные расстояния */
  white-space: nowrap;               /* текст не переносится */
  
  /* ВНЕШНИЙ ВИД — можно менять */
  position: relative;                /* для безопасных псевдоэлементов */
  color: var(--bs-body-color);
  text-decoration: none;
  transition: background-color .18s ease, color .18s ease, box-shadow .18s ease, border-color .18s ease;
}

/* убираем margin у иконок — используем gap */
.ff-pill i,
.ff-pill .bi { 
  margin: 0 !important; 
}

/* === СОСТОЯНИЯ ВКЛАДОК === */

/* HOVER: ТОЛЬКО фон/цвет/тень — геометрия НЕ МЕНЯЕТСЯ */
.ff-pill:hover {
  background: rgba(255,255,255,.06);
  border-color: var(--bs-border-color);    /* цвет, НЕ толщина */
  color: var(--bs-body-color);
  text-decoration: none;
  /* НЕ меняем: padding, font-weight, line-height, letter-spacing */
}

/* ACTIVE: ТОЛЬКО подсветка — размеры НЕ МЕНЯЮТСЯ */
.ff-pill.is-active {
  color: var(--bs-body-color);
  background: radial-gradient(120% 160% at 10% -10%, rgba(110,168,254,.25), rgba(155,107,255,.25) 60%, transparent 65%);
  border-color: var(--bs-border-color);    /* цвет, НЕ толщина */
  
  /* Свечение только через box-shadow — НЕ влияет на layout */
  box-shadow:
    0 0 0 1px rgba(110,168,254,.25) inset,
    0 8px 24px rgba(110,168,254,.35),
    0 12px 30px rgba(155,107,255,.25);
    
  /* НЕ меняем: padding, font-weight, line-height, letter-spacing, border-width */
}

/* FOCUS-VISIBLE: кольцо НЕ меняет layout */
.ff-pill:focus-visible {
  outline: 2px solid var(--bs-primary);
  outline-offset: 2px;                     /* отступ от элемента — не меняет размер */
  
  /* Дополнительное свечение только через box-shadow */
  box-shadow: 
    0 0 0 4px rgba(13,110,253,.25),
    0 8px 24px rgba(110,168,254,.35);
}

/* ========== ЗАЩИТА ОТ ИЗМЕНЕНИЯ ГЕОМЕТРИИ ========== */

/* Убираем любые псевдоэлементы, которые могут влиять на размеры */
.ff-tabs::before,
.ff-tabs::after,
.ff-pill::before,
.ff-pill::after { 
  content: none !important; 
  border: 0 !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Принудительно запрещаем изменение ключевых параметров */
.ff-pill,
.ff-pill:hover,
.ff-pill.is-active,
.ff-pill:focus,
.ff-pill:focus-visible {
  /* НЕИЗМЕННЫЕ РАЗМЕРЫ */
  min-height: 44px !important;
  padding: .5rem 1rem !important;
  border-width: 1px !important;             /* только толщина, цвет может меняться */
  
  /* НЕИЗМЕННАЯ ТИПОГРАФИКА */
  font-weight: 600 !important;
  line-height: 1.25 !important;
  letter-spacing: 0 !important;
  
  /* НЕИЗМЕННОЕ ПОВЕДЕНИЕ */
  box-sizing: border-box !important;        /* учитываем border в размерах */
  white-space: nowrap !important;
}

/* ---------- Тумблер темы ---------- */
.ff-switch .ff-track{
  position: relative; width: 84px; height: 36px; border-radius: 999px;
  border: 1px solid var(--bs-border-color);
  background: rgba(255,255,255,.06);
  backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px);
  padding: 0 10px; gap: 8px; color: var(--bs-body-color);
}
.ff-switch .ff-thumb{
  position: absolute; top: 3px; left: 4px;
  width: 30px; height: 30px; border-radius: 50%;
  background: radial-gradient(80% 80% at 30% 20%, #fff, #eaf1ff);
  box-shadow:
    0 0 0 1px rgba(255,255,255,.4) inset,
    0 10px 20px rgba(110,168,254,.35),
    0 6px 16px rgba(155,107,255,.25);
  transition: transform .2s ease;
}
:root[data-bs-theme="dark"] .ff-switch .ff-thumb{ transform: translateX(48px); }

/* ---------- Календарь (месяц/год) ---------- */
.ff-month-picker {
  display: inline-flex;
  align-items: center;
}

.ff-month-btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border: 1px solid var(--bs-border-color);
  border-radius: 12px;
  background: rgba(255,255,255,.06);
  color: var(--bs-body-color);
  font-size: 14px;
  font-weight: 500;
  text-decoration: none;
  cursor: pointer;
  transition: all .15s ease;
  min-height: 36px;
  backdrop-filter: blur(6px);
}

.ff-month-btn:hover {
  background: rgba(255,255,255,.1);
  border-color: var(--bs-border-color);
  color: var(--bs-body-color);
  text-decoration: none;
  box-shadow: 0 4px 12px rgba(0,0,0,.1);
}

.ff-month-btn i {
  font-size: 13px;
}

.ff-month-btn .bi-chevron-down {
  transition: transform .15s ease;
}

.ff-month-btn[aria-expanded="true"] .bi-chevron-down {
  transform: rotate(180deg);
}

/* Светлая тема */
:root[data-bs-theme="light"] .ff-month-btn {
  background: rgba(0,24,64,.06);
}

:root[data-bs-theme="light"] .ff-month-btn:hover {
  background: rgba(0,24,64,.1);
}

/* ========== ТЕМИЗАЦИЯ ========== */

/* === СВЕТЛАЯ ТЕМА === */
:root[data-bs-theme="light"] .cb-nav { 
  background: rgba(255,255,255,.85); 
  backdrop-filter: blur(10px); 
}

:root[data-bs-theme="light"] .ff-tabs { 
  background: rgba(0,0,0,.04); 
}

/* СВЕТЛАЯ ТЕМА: только цвета, НЕ геометрия */
:root[data-bs-theme="light"] .ff-pill:hover { 
  background: rgba(0,0,0,.05); 
  /* НЕ меняем: padding, font-weight, border-width */
}

:root[data-bs-theme="light"] .ff-pill.is-active {
  background: radial-gradient(120% 160% at 10% -10%, rgba(110,168,254,.18), rgba(155,107,255,.18) 60%, transparent 65%);
  box-shadow:
    0 0 0 1px rgba(110,168,254,.18) inset,
    0 8px 20px rgba(110,168,254,.25),
    0 10px 24px rgba(155,107,255,.20);
  /* НЕ меняем: padding, font-weight, border-width */
}

/* === ТЕМНАЯ ТЕМА === */
:root[data-bs-theme="dark"] .cb-nav {
  background: rgba(34,37,41,.75);
  backdrop-filter: blur(8px);
}

:root[data-bs-theme="dark"] .ff-tabs {
  background: rgba(255,255,255,.04);
}

/* ТЕМНАЯ ТЕМА: только цвета, НЕ геометрия */
:root[data-bs-theme="dark"] .ff-pill:hover {
  background: rgba(255,255,255,.06);
  /* НЕ меняем: padding, font-weight, border-width */
}

/* ========== АДАПТИВНОСТЬ ========== */

/* === МОБИЛЬНАЯ НАВИГАЦИЯ === */
@media (max-width: 991.98px) {
  .ff-tabs-wrap {
    display: none !important;  /* скрываем десктопные табы */
  }
  
  .cb-nav-inner {
    justify-content: space-between;
  }
}

/* === МОБИЛЬНЫЙ OFF-CANVAS === */
.offcanvas-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.55); /* увеличили затемнение */
  z-index: 1040;
  opacity: 0;
  visibility: hidden;
  transition: opacity .2s ease;
}

.offcanvas-panel {
  position: fixed;
  inset: 0 auto 0 0;
  width: var(--cb-sidebar-width, 280px);
  max-width: calc(100% - 72px);
  border-right: 1px solid var(--bs-border-color);
  transform: translateX(-100%);
  transition: transform .2s ease;
  z-index: 1041;
  min-height: 44px; /* для кликабельности */
}

/* Тема-зависимые НЕПРОЗРАЧНЫЕ фоны для панели - ПЕРЕОПРЕДЕЛЯЕМ theme-ff-light.css */
/* Высокая специфичность для гарантированного переопределения */
:root[data-bs-theme="light"] header .offcanvas-panel,
:root[data-bs-theme="light"] .offcanvas-panel {
  background: #F4F7FB !important; /* ПОЛНОСТЬЮ непрозрачный pearl light */
  background-color: #F4F7FB !important;
  color: #1E2732 !important;
  opacity: 1 !important;
  backdrop-filter: none !important;
  background-clip: padding-box !important;
  /* Убираем все возможные источники прозрачности */
  filter: none !important;
  mix-blend-mode: normal !important;
}

:root[data-bs-theme="dark"] header .offcanvas-panel,
:root[data-bs-theme="dark"] .offcanvas-panel {
  background: #0f1420 !important; /* ПОЛНОСТЬЮ непрозрачный темный фон */
  background-color: #0f1420 !important;
  color: #e7ecf3 !important;
  opacity: 1 !important;
  backdrop-filter: none !important;
  background-clip: padding-box !important;
  /* Убираем все возможные источники прозрачности */
  filter: none !important;
  mix-blend-mode: normal !important;
}

/* Элементы меню - минимальная высота для кликабельности */
.offcanvas-panel .list-group-item {
  min-height: 44px !important;
  display: flex !important;
  align-items: center !important;
  padding: 12px 16px !important;
}

/* Overflow hidden для body при открытом меню */
.offcanvas-open {
  overflow: hidden !important;
}

.offcanvas-open .offcanvas-backdrop {
  opacity: 1;
  visibility: visible;
}

.offcanvas-open .offcanvas-panel {
  transform: translateX(0);
}

/* ---------- Большие кнопки Дох/Расх (для дашборда) ---------- */
/* CSS переменные для адаптивных размеров */
:root {
  --cta-h: clamp(44px, 6vw, 64px);
  --cta-pad-x: clamp(14px, 2.5vw, 24px);
  --cta-pad-y: clamp(8px, 1.5vw, 12px);
  --cta-font: clamp(14px, 1.2vw, 18px);
  --cta-badge: clamp(26px, 2vw, 36px);
  --cta-gap: clamp(8px, 1vw, 14px);
}

/* Контейнер кнопок (грамотный перенос) */
.ff-actions {
  display: flex;
  gap: clamp(12px, 1.5vw, 16px);
  flex-wrap: wrap;
  align-items: center;
  justify-content: end;
}

/* Базовый вид — резиновые адаптивные капсулы */
.ff-action {
  display: inline-flex;
  align-items: center;
  gap: var(--cta-gap);
  border-radius: 9999px;
  border: 1px solid transparent;
  padding: var(--cta-pad-y) var(--cta-pad-x);
  min-height: var(--cta-h);
  min-width: clamp(140px, 42vw, 220px);
  font-size: var(--cta-font);
  line-height: 1.2;
  font-weight: 600;
  white-space: nowrap;
  text-decoration: none;
  cursor: pointer;
  box-shadow: 0 8px 24px rgba(0,0,0,.15);
  transition: transform .15s ease, box-shadow .15s ease;
  justify-content: center;
}

/* Значок/бейдж строго внутри круга */
.ff-action .ff-badge {
  width: var(--cta-badge);
  height: var(--cta-badge);
  border-radius: 50%;
  overflow: hidden; /* КРИТИЧНО: обрезает выходящие элементы */
  background: rgba(255,255,255,.8);
  display: grid;
  place-items: center;
  flex-shrink: 0;
  position: relative;
  backdrop-filter: blur(4px);
  border: 1px solid rgba(255,255,255,.2);
}

/* Иконка 60-65% от бейджа */
.ff-action .ff-badge i { 
  font-size: calc(var(--cta-badge) * 0.6);
  color: #ffffff;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,.2));
  transition: filter .12s ease;
  position: relative;
  z-index: 1;
}

/* Hover/Active эффекты */
.ff-action:hover { 
  box-shadow: 0 12px 32px rgba(0,0,0,.2); 
  transform: translateY(-2px); 
  text-decoration: none;
}
.ff-action:active { 
  transform: translateY(0); 
  box-shadow: 0 6px 16px rgba(0,0,0,.15); 
}

/* Фокус с кольцом */
.ff-action:focus-visible {
  outline: 2px solid var(--bs-primary);
  outline-offset: 2px;
  box-shadow: 
    0 8px 24px rgba(0,0,0,.15),
    0 0 0 4px rgba(13,110,253,.25);
}

/* Цветовые схемы кнопок */
.ff-expense {
  background: linear-gradient(135deg, #ff6b9e, #ff8ba7);
  color: #fff;
  border-color: rgba(255,255,255,.1);
}

.ff-income {
  background: linear-gradient(135deg, #3ed1a5, #52e0c0);
  color: #fff;
  border-color: rgba(255,255,255,.1);
}

/* ===== АДАПТИВНЫЕ БРЕЙКПОИНТЫ ===== */

/* Очень узкие экраны: кнопки в столбик */
@media (max-width: 480px) {
  .ff-actions {
    justify-content: stretch;
    gap: 12px;
  }
  
  .ff-action {
    width: 100%;
    min-width: unset;
    justify-content: center;
  }
}

/* Мобильные широкие: две кнопки в ряд */
@media (min-width: 481px) and (max-width: 575.98px) {
  .ff-actions {
    justify-content: center;
    gap: 12px;
  }
  
  .ff-action {
    flex: 1 1 48%;
    min-width: 140px;
    max-width: 48%;
    justify-content: center;
  }
}

/* Планшеты и выше: контейнер справа */
@media (min-width: 576px) {
  .ff-actions {
    justify-content: end;
  }
}

/* Светлая тема: улучшенный контраст */
:root[data-bs-theme="light"] .ff-expense { 
  color: #fff; 
  box-shadow: 0 8px 24px rgba(255,107,158,.25);
}
:root[data-bs-theme="light"] .ff-income { 
  color: #fff; 
  box-shadow: 0 8px 24px rgba(62,209,165,.25);
}

/* Темная тема: мягкое свечение */
:root[data-bs-theme="dark"] .ff-expense { 
  color: #fff; 
  box-shadow: 0 8px 24px rgba(255,107,158,.35);
}
:root[data-bs-theme="dark"] .ff-income { 
  color: #fff; 
  box-shadow: 0 8px 24px rgba(62,209,165,.35);
}

/* ========== FF-СТИЛЬ ВНУТРЕННИХ ЭЛЕМЕНТОВ ========== */

/* Улучшенная капсула с внутренней подсветкой */
.ff-action {
  position: relative;
  /* Внутренний градиент поверх фона */
  background: 
    radial-gradient(120% 160% at 20% 20%, rgba(255,255,255,.12), rgba(255,255,255,0) 60%),
    var(--ff-action-bg); /* переменная для основного градиента */
  
  /* Внутренние тени для объема */
  box-shadow:
    /* внутренний кант */
    inset 0 0 0 1px rgba(255,255,255,.18),
    /* верхний блик */
    inset 0 12px 24px rgba(255,255,255,.06),
    /* внешняя тень */
    0 8px 24px rgba(0,0,0,.15);
    
  /* Улучшенный текст с тенью */
  color: #eef3ff;
  text-shadow: 0 1px 2px rgba(0,0,0,.15);
  
  transition: transform .12s ease, box-shadow .2s ease, opacity .12s ease;
}

/* Основные градиенты через переменные */
.ff-expense {
  --ff-action-bg: linear-gradient(135deg, #ff6b9e, #ff8ba7);
  --ff-accent-color: #ff7aa8;
  --ff-accent-bright: #ff4d7a;
  --ff-glow-color: rgba(255,122,168,.35);
}

.ff-income {
  --ff-action-bg: linear-gradient(135deg, #3ed1a5, #52e0c0);
  --ff-accent-color: #46e6b1;
  --ff-accent-bright: #26c6a2;
  --ff-glow-color: rgba(70,230,177,.35);
}

/* Улучшенный бейдж с двухслойной структурой */
.ff-action .ff-badge {
  width: clamp(26px, 1.8vw, 32px);
  height: clamp(26px, 1.8vw, 32px);
  border-radius: 50%;
  background: rgba(255,255,255,.8);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  position: relative;
  backdrop-filter: blur(4px);
  border: 1px solid rgba(255,255,255,.2);
}

.ff-action .ff-badge::before {
  content: '';
  position: absolute;
  inset: 2px;
  border-radius: 50%;
  border: 2px solid var(--ff-accent-color);
  opacity: 0.6;
  transition: border-color .12s ease, opacity .12s ease;
}

/* Белая иконка с деликатным свечением */
.ff-action .ff-badge i {
  color: #ffffff;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,.2));
  transition: filter .12s ease;
  position: relative;
  z-index: 1;
  font-size: clamp(12px, 1vw, 14px); /* Уменьшаем размер иконки */
}

/* ========== СОСТОЯНИЯ ВЗАИМОДЕЙСТВИЯ ========== */

/* Hover: усиленная подсветка */
.ff-action:hover {
  background: 
    radial-gradient(120% 160% at 20% 20%, rgba(255,255,255,.18), rgba(255,255,255,0) 60%),
    var(--ff-action-bg);
    
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.25),
    inset 0 12px 24px rgba(255,255,255,.09),
    0 12px 32px rgba(0,0,0,.2),
    0 8px 24px var(--ff-glow-color); /* внешнее цветное свечение */
    
  transform: translateY(-2px);
}

.ff-action:hover .ff-badge::before {
  border-color: var(--ff-accent-bright);
  opacity: 0.8;
}

.ff-action:hover .ff-badge i {
  filter: drop-shadow(0 1px 2px rgba(0,0,0,.2)) drop-shadow(0 0 4px rgba(255,255,255,.4));
}

/* Active: проминание */
.ff-action:active {
  transform: translateY(1px);
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.18),
    inset 0 8px 16px rgba(255,255,255,.06),
    0 4px 12px rgba(0,0,0,.25),
    0 4px 16px var(--ff-glow-color);
}

/* Focus-visible: двойное кольцо */
.ff-action:focus-visible {
  outline: none;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.18),
    inset 0 12px 24px rgba(255,255,255,.06),
    0 8px 24px rgba(0,0,0,.15),
    0 0 0 3px rgba(255,255,255,.18),
    0 0 0 6px var(--ff-glow-color);
}

/* ========== СВЕТЛАЯ ТЕМА ========== */

:root[data-bs-theme="light"] .ff-action {
  color: #2a3340;
  text-shadow: 0 1px 2px rgba(255,255,255,.3);
  
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.3),
    inset 0 12px 24px rgba(255,255,255,.12),
    0 8px 24px rgba(0,0,0,.1);
}

:root[data-bs-theme="light"] .ff-action .ff-badge {
  background: rgba(255,255,255,.6);
  border-color: rgba(255,255,255,.4);
}

:root[data-bs-theme="light"] .ff-action:hover {
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.4),
    inset 0 12px 24px rgba(255,255,255,.15),
    0 12px 32px rgba(0,0,0,.15),
    0 8px 24px var(--ff-glow-color);
}

:root[data-bs-theme="light"] .ff-action:focus-visible {
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.3),
    inset 0 12px 24px rgba(255,255,255,.12),
    0 8px 24px rgba(0,0,0,.1),
    0 0 0 3px rgba(0,0,0,.08),
    0 0 0 6px var(--ff-glow-color);
}

/* ---- Страница расходов ---- */

/* карточка empty-state со стеклянной каймой */
.ff-empty .card-body{
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0));
  border-radius: 12px;
}
.ff-empty{
  border-radius: 12px;
  background:
    radial-gradient(120% 200% at 0% 0%, rgba(110,168,254,.08), transparent 40%),
    radial-gradient(120% 200% at 100% 0%, rgba(155,107,255,.07), transparent 40%);
  border: 1px solid var(--bs-border-color);
}

/* иконка пустого состояния */
.ff-empty-icon{
  width: 48px; height: 48px; border-radius: 12px;
  display: inline-flex; align-items:center; justify-content:center;
  background: rgba(255,255,255,.06);
  border: 1px solid var(--bs-border-color);
  color: var(--bs-body-color);
  box-shadow: 0 8px 22px rgba(0,0,0,.15) inset;
  font-size: 1.25rem;
}

/* цветной индикатор категории */
.ff-cat-dot{
  width: 10px; height: 10px; border-radius: 50%;
  background: var(--dot, var(--bs-primary));
  box-shadow: 0 0 0 2px rgba(0,0,0,.08);
  display:inline-block;
}

/* таблица: компактные ячейки, хорошая читаемость */
.table > :not(caption) > * > *{
  padding: .875rem .75rem;
}

/* off-canvas (мобилка) — нейтральный, под твои общие стили */
/* Дублированные стили удалены - используем основные выше */

/* hit-area >= 44px */
.cb-btn, .ff-pill{ min-height: 44px; }

/* ===== КНОПКА ПОЛЬЗОВАТЕЛЯ ===== */
.ff-user {
  /* Наследует базовую геометрию от .ff-pill */
  border: 1px solid var(--bs-border-color);
  color: var(--bs-body-color);
  text-decoration: none;
  background: transparent;
  transition: all 0.15s ease;
}

/* Светлая тема - перламутровый стиль */
:root[data-bs-theme="light"] .ff-user {
  background: rgba(0,24,64,.06);
  border-color: var(--bs-border-color);
  color: var(--bs-body-color);
}

:root[data-bs-theme="light"] .ff-user:hover {
  background: rgba(0,24,64,.10);
  border-color: var(--bs-border-color);
  color: var(--bs-body-color);
}

/* Тёмная тема - стеклянный стиль */
:root[data-bs-theme="dark"] .ff-user {
  background: rgba(255,255,255,.06);
  border-color: var(--bs-border-color);
  color: var(--bs-body-color);
}

:root[data-bs-theme="dark"] .ff-user:hover {
  background: rgba(255,255,255,.10);
  border-color: var(--bs-border-color);
  color: var(--bs-body-color);
}

/* ===== ВЫПАДАЮЩЕЕ МЕНЮ ПРОФИЛЯ ===== */
.ff-user .bi-caret-down-fill {
  font-size: 10px;
  transition: transform .15s ease;
}

.ff-user[aria-expanded="true"] .bi-caret-down-fill {
  transform: rotate(180deg);
}

/* Стили для dropdown-menu */
.dropdown-menu.shadow-soft {
  border: 1px solid var(--bs-border-color);
  border-radius: 12px;
  box-shadow: 0 8px 32px rgba(0,0,0,.15);
  backdrop-filter: blur(8px);
  padding: 8px;
  margin-top: 8px;
}

.dropdown-menu.shadow-soft .dropdown-item {
  border-radius: 8px;
  padding: 8px 12px;
  font-size: 14px;
  transition: all .15s ease;
}

.dropdown-menu.shadow-soft .dropdown-item:hover {
  background: rgba(255,255,255,.1);
}

.dropdown-menu.shadow-soft .dropdown-item.text-danger:hover {
  background: rgba(220,53,69,.1);
  color: var(--bs-danger) !important;
}

/* Светлая тема */
:root[data-bs-theme="light"] .dropdown-menu.shadow-soft {
  background: rgba(255,255,255,.95);
  box-shadow: 0 8px 32px rgba(0,0,0,.12);
}

:root[data-bs-theme="light"] .dropdown-menu.shadow-soft .dropdown-item:hover {
  background: rgba(0,0,0,.05);
}

/* Темная тема */
:root[data-bs-theme="dark"] .dropdown-menu.shadow-soft {
  background: rgba(34,37,41,.95);
}

/* ========== МОБИЛЬНАЯ ОПТИМИЗАЦИЯ HERO КАРТОЧКИ ========== */

/* ========== ФЛЮИДНЫЕ CSS-ПЕРЕМЕННЫЕ ========== */
:root {
  /* Баннер/панель */
  --ff-panel-pad: clamp(12px, 4vw, 24px);
  --ff-panel-radius: clamp(12px, 3vw, 20px);
  --ff-panel-gap: clamp(8px, 2vw, 12px);
  
  /* Типографика */
  --ff-title: clamp(24px, 6vw, 34px);
  --ff-meta: clamp(12px, 3.6vw, 16px);
  
  /* CTA кнопки */
  --ff-cta-h: clamp(44px, 9vw, 56px);
  --ff-cta-pad: clamp(14px, 4vw, 20px);
  --ff-cta-gap: clamp(10px, 3vw, 16px);
  --ff-cta-font: clamp(14px, 3vw, 16px);
  --ff-cta-badge: clamp(1.6em, 2vw, 2em);
  --ff-cta-icon: 1.4em;
}

/* ========== ПРИМЕНЕНИЕ ФЛЮИДНОГО ДИЗАЙНА ========== */

/* 1) Базовые стили баннера — работают везде */
.hero {
  padding: 1.25rem 1.5rem;
  border-radius: var(--ff-panel-radius);
}

.hero h1 {
  font-size: var(--ff-title);
  line-height: 1.2;
}

.hero .meta {
  font-size: var(--ff-meta);
  opacity: 0.8;
}

/* Блок с кнопками всегда в ряд, с нормальным зазором */
.hero .ff-actions {
  display: flex;
  align-items: center;
  gap: 12px;
}

/* Кнопки не на всю ширину по умолчанию */
.hero .ff-action {
  white-space: nowrap;
  height: var(--ff-cta-h);
  padding: 0 var(--ff-cta-pad);
  font-size: var(--ff-cta-font);
  border-radius: var(--ff-panel-radius);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--ff-cta-gap);
  transition: all 0.2s ease;
  font-weight: 500;
}

.ff-badge {
  width: var(--ff-cta-badge);
  height: var(--ff-cta-badge);
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.ff-badge i {
  font-size: var(--ff-cta-icon);
}

/* 2) Только мобильные (<576px): компактная карточка и вертикальные кнопки */
@media (max-width: 575.98px) {
  .hero {
    width: 100% !important;
    max-width: none !important;
    margin: 0 0 1rem 0 !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
    left: auto !important;
    right: auto !important;
    transform: none !important;
    position: relative !important;
    float: none !important;
    box-sizing: border-box;
    border-radius: 16px;
    overflow: hidden;
    padding: 16px;
    display: block !important;
  }
  
  .cb-card {
    width: 100%;
    margin: 0 0 1rem 0;
    box-sizing: border-box;
    border-radius: 16px;
    overflow: hidden;
  }
  
  /* Внутренний контейнер баннера */
  .hero > .d-flex {
    flex-direction: column !important;
    gap: 16px !important;
    align-items: stretch !important;
    justify-content: flex-start !important;
  }
  
  /* Кнопки в баннере */
  .hero .ff-actions {
    flex-direction: column;
    align-items: stretch;
    gap: 10px;
    width: 100%;
    margin: 0;
    order: 2;
  }
  
  .hero .ff-action {
    width: 100%;
    justify-content: center;
    min-height: 44px;
  }
  
  /* Текстовый контент баннера */
  .hero > .d-flex > div:first-child {
    order: 1;
  }
}

/* 3) Начиная с md (≥768px): явный десктоп */
@media (min-width: 768px) {
  .hero {
    max-width: none;
    width: 100%;
  }
  
  .hero .ff-actions {
    flex-direction: row;
    align-items: center;
  }
  
  .hero .ff-action {
    width: auto;
  }
}

/* Адаптивная hero карточка */
@media (max-width: 576px) {
  .hero {
    padding: var(--hero-pad-y) var(--hero-pad-x);
    margin: 0 16px; /* отступы от краев экрана */
    border-radius: 16px; /* мягче углы */
    box-shadow: 0 8px 24px rgba(0,0,0,.2); /* одна мягкая тень */
  }
  
  /* Притушаем декоративный блик на мобильных */
  .hero:before {
    opacity: 0.4;
    width: 200px;
    height: 200px;
    right: -50px;
    top: -50px;
  }
  
  /* Флюидная типографика */
  .hero h1 {
    font-size: var(--hero-font-size);
    font-weight: 800;
    font-variant-numeric: tabular-nums; /* стабильные цифры */
    margin: 0 0 var(--hero-gap);
  }
  
  /* Компактная мета-информация */
  .hero .meta {
    font-size: 14px;
    line-height: 1.4;
    opacity: 0.9;
    margin-bottom: var(--hero-gap);
  }
  
  /* Мобильная статистика в виде списка */
  .hero-stats {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }
  
  .hero-stat {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
  }
  
  .hero-stat i {
    font-size: 12px;
    opacity: 0.8;
    width: 16px; /* фиксированная ширина для выравнивания */
    text-align: center;
  }
  
  .hero-stat strong {
    font-variant-numeric: tabular-nums;
    font-weight: 600;
    color: rgba(255,255,255,.95);
  }
  
  .hero-stat span {
    opacity: 0.8;
    font-size: 12px;
  }
  
  /* Контейнер для кнопок */
  .hero .ff-actions {
    margin-top: clamp(12px, 3vw, 16px);
    gap: 12px;
    justify-content: stretch;
  }
  
  /* Переопределяем CTA переменные для мобильных */
  :root {
    --cta-h: clamp(44px, 8vw, 52px);
    --cta-font: clamp(14px, 2.5vw, 16px);
    --cta-badge: clamp(28px, 4vw, 32px);
    --cta-pad-x: clamp(12px, 3vw, 16px);
    --cta-gap: clamp(8px, 2vw, 12px);
  }
  
  /* Упрощенные FF-эффекты на мобильных */
  .ff-action {
    box-shadow: 0 4px 16px rgba(0,0,0,.1); /* одна мягкая тень */
  }
  
  .ff-action:hover {
    box-shadow: 0 6px 20px rgba(0,0,0,.15);
    transform: translateY(-1px); /* меньше движения */
  }
  
  /* Упрощенный FF-стиль для внутренних элементов */
  .ff-action {
    background: var(--ff-action-bg); /* убираем сложный радиальный градиент */
    box-shadow: 
      inset 0 0 0 1px rgba(255,255,255,.1), /* простой внутренний кант */
      0 4px 16px rgba(0,0,0,.1); /* одна внешняя тень */
  }
  
  .ff-action:hover {
    background: var(--ff-action-bg);
    box-shadow:
      inset 0 0 0 1px rgba(255,255,255,.15),
      0 6px 20px rgba(0,0,0,.15),
      0 4px 12px var(--ff-glow-color); /* цветное свечение */
  }
}

/* Очень узкие экраны */
@media (max-width: 360px) {
  .hero {
    margin: 0 12px;
    padding: 14px 12px;
  }
  
  .hero h1 {
    font-size: 22px; /* фиксированный размер для узких экранов */
  }
  
  .hero .meta {
    font-size: 13px;
  }
  
  /* Минимальные размеры кнопок */
  :root {
    --cta-h: 44px;
    --cta-font: 14px;
    --cta-badge: 26px;
    --cta-pad-x: 12px;
    --cta-gap: 8px;
  }
}

/* Улучшенная светлая тема на мобильных */
@media (max-width: 576px) {
  :root[data-bs-theme="light"] .hero {
    /* Притушенный градиент */
    background: linear-gradient(135deg, 
      color-mix(in srgb, var(--hero-a) 85%, white),
      color-mix(in srgb, var(--hero-b) 85%, white)
    );
    box-shadow: 0 8px 24px rgba(0,0,0,.12);
  }
}

/* ===== КОМПАКТНЫЕ КАПСУЛЫ-ДЕЙСТВИЯ ===== */
/* Наши «большие» капсулы оставляем для дашборда, здесь — модификатор --md */
.ff-action.ff-action--md{
  padding: .75rem 1.1rem;
  min-height: 48px;
  min-width: 180px;      /* единая ширина для всех кнопок */
  font-size: 1rem;
  font-weight: 600;
}
.ff-action.ff-action--md .ff-badge{ 
  width: 28px; 
  height: 28px; 
  /* Переопределяем только для модификатора --md */ 
}
.ff-action.ff-action--md i{ font-size: 1.05rem; }

/* Смягчаем палитру «Расход» — стеклянный розовый, не «конфета» */
.ff-expense{
  background: linear-gradient(135deg, rgba(255,107,158,.35), rgba(255,139,167,.35));
  color: var(--bs-body-color);
  border-color: rgba(255,255,255,.2);
  backdrop-filter: blur(6px);
}
:root[data-bs-theme="light"] .ff-expense{
  background: linear-gradient(135deg, rgba(255,107,158,.22), rgba(255,139,167,.22));
  border-color: rgba(0,0,0,.08);
}

/* ===== ФИЛЬТРЫ — нейтральный фокус и без «зелёной валидации» ===== */
.form-control, .form-select { box-shadow: none; }
.form-control:focus, .form-select:focus{
  border-color: var(--bs-border-color);
  box-shadow: 0 0 0 .2rem rgba(13,110,253,.15);
}

/* отключаем «ярко-зелёный» valid у полей на этой странице */
#main-content .form-control.is-valid,
#main-content .form-select.is-valid,
#main-content .was-validated .form-control:valid,
#main-content .was-validated .form-select:valid{
  border-color: var(--bs-border-color) !important;
  background-image: none !important;
  box-shadow: none !important;
  padding-right: .75rem !important;
}

/* Карточка фильтров компактнее */
.cb-card .card-body{ padding: 1rem 1rem; }

/* ===== EMPTY STATE — менее тяжёлый фон ===== */
.ff-empty{
  border-radius: 12px;
  background:
    radial-gradient(120% 200% at 0% 0%, rgba(110,168,254,.05), transparent 40%),
    radial-gradient(120% 200% at 100% 0%, rgba(155,107,255,.05), transparent 40%);
  border: 1px solid var(--bs-border-color);
}

/* ===== СВЕТЛАЯ ТЕМА — читаемость ===== */
:root[data-bs-theme="light"] .cb-nav{ background: rgba(255,255,255,.85); }
:root[data-bs-theme="light"] .ff-empty{ background:
  radial-gradient(120% 200% at 0% 0%, rgba(110,168,254,.06), transparent 38%),
  radial-gradient(120% 200% at 100% 0%, rgba(155,107,255,.06), transparent 38%); }

/* тёмная шапка лёгкой дымкой (не переопределяем bootstrap, только фон) */
:root[data-bs-theme="dark"] .cb-nav{
  background: rgba(34,37,41,.6);
  backdrop-filter: blur(8px);
}

/* === Единая высота и отступы для элементов панели фильтров === */
.ff-filters .input-group > .form-control,
.ff-filters .input-group > .form-select,
.ff-filters .input-group > .btn,
.ff-filters .input-group-text,
.ff-filters .btn {                       /* захватим и кнопку сортировки */
  height: 44px;                          /* единая высота */
  padding-top: .375rem;
  padding-bottom: .375rem;
}

/* Чуть крупнее шрифт, чтобы текст не «тонул» */
.ff-filters .form-control,
.ff-filters .form-select,
.ff-filters .btn,
.ff-filters .input-group-text {
  font-size: 1rem;
  line-height: 1.25;
}

/* Выравниваем радиусы у input-group, чтобы капсула была ровная */
.ff-filters .input-group .form-control { border-radius: .5rem; }
.ff-filters .input-group .input-group-text { border-radius: .5rem; }

/* Нейтральный focus и без зелёной валидации (если вдруг прилипло) */
.ff-filters .form-control:focus,
.ff-filters .form-select:focus { 
  border-color: var(--bs-border-color);
  box-shadow: 0 0 0 .2rem rgba(13,110,253,.15);
}
.ff-filters .form-control.is-valid,
.ff-filters .form-select.is-valid,
.ff-filters .was-validated .form-control:valid,
.ff-filters .was-validated .form-select:valid{
  border-color: var(--bs-border-color) !important;
  background-image: none !important;
  box-shadow: none !important;
  padding-right: .75rem !important;
}

/* ===== Таблица доходов — аккуратные отступы и разделители ===== */
.ff-table-income > :not(caption) > * > *{
  padding: .9rem .75rem;
}
.ff-table-income tbody tr + tr td{
  border-top: 1px solid var(--bs-border-color);
}

/* Месяц — маленькая «пилюля» */
.ff-month{
  display: inline-block;
  padding: .25rem .5rem;
  border-radius: .5rem;
  border: 1px solid var(--bs-border-color);
  background: rgba(255,255,255,.05);
  font-size: .95rem;
}

/* В светлой теме слегка меняем фон пилюли */
:root[data-bs-theme="light"] .ff-month{
  background: rgba(0,0,0,.03);
}

/* Кнопка "Добавить доход" — стеклянно-зелёная, не кричащая */
.ff-income{
  background: linear-gradient(135deg, rgba(62,209,165,.35), rgba(82,224,192,.35));
  color: var(--bs-body-color);
  border-color: rgba(255,255,255,.2);
  backdrop-filter: blur(6px);
}
:root[data-bs-theme="light"] .ff-income{
  background: linear-gradient(135deg, rgba(62,209,165,.22), rgba(82,224,192,.22));
  border-color: rgba(0,0,0,.08);
}

/* ===== МОБИЛЬНЫЕ КАРТОЧКИ ДОХОДОВ ===== */
@media (max-width: 767.98px) {
  /* Компактные карточки доходов */
  .income-mobile-card {
    border: 1px solid var(--bs-border-color);
    border-radius: 12px;
    background: rgba(255,255,255,.02);
    backdrop-filter: blur(4px);
    margin-bottom: 8px;
    transition: all .15s ease;
  }
  
  .income-mobile-card:hover {
    background: rgba(255,255,255,.05);
    border-color: var(--bs-border-color-translucent);
    box-shadow: 0 2px 8px rgba(0,0,0,.1);
  }
  
  /* Основной контент карточки */
  .income-card-main {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: 12px;
    padding: 12px 16px 8px;
  }
  
  /* Левая часть - сумма и месяц */
  .income-card-info {
    flex: 1;
    min-width: 0;
  }
  
  .income-amount {
    font-size: 16px;
    font-weight: 700;
    font-variant-numeric: tabular-nums;
    line-height: 1.2;
    margin-bottom: 2px;
    color: var(--bs-success, #198754);
  }
  
  .income-date {
    font-size: 11px;
    font-weight: 500;
    color: var(--bs-secondary-color);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }
  
  /* Правая часть - кнопки действий */
  .income-card-actions {
    display: flex;
    gap: 4px;
    flex-shrink: 0;
    margin-top: -2px;
  }
  
  /* Источник дохода внизу */
  .income-source {
    padding: 0 16px 12px;
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 13px;
    color: var(--bs-body-color);
    opacity: 0.85;
    border-top: 1px solid rgba(255,255,255,.05);
    margin-top: 4px;
    padding-top: 8px;
  }
  
  .income-source i {
    font-size: 11px;
    opacity: 0.7;
  }
  
  /* Компактные кнопки действий */
  .income-card-actions .ff-iconbtn {
    width: 28px;
    height: 28px;
    font-size: 11px;
    border-radius: 6px;
  }
  
  /* Светлая тема */
  :root[data-bs-theme="light"] .income-mobile-card {
    background: rgba(0,0,0,.02);
    border-color: var(--bs-border-color);
  }
  
  :root[data-bs-theme="light"] .income-mobile-card:hover {
    background: rgba(0,0,0,.04);
    box-shadow: 0 2px 8px rgba(0,0,0,.08);
  }
  
  :root[data-bs-theme="light"] .income-source {
    border-top-color: rgba(0,0,0,.08);
  }
  
  :root[data-bs-theme="light"] .income-amount {
    color: #146c43;
  }
}

/* Шапка: чтобы кнопка не давила заголовок */
.expenses-toolbar{ min-height: 44px; }
.expenses-add-btn{ min-width: 0; }        /* не фиксируем минимальную ширину */
@media (max-width: 1200px){
  .expenses-add-btn{ padding:.6rem .9rem; min-height: 44px; font-size:.95rem; }
  .expenses-add-btn .ff-badge{ width:26px; height:26px; }
}

/* Ровная высота всех контролов в форме расходов */
.ff-form .form-control,
.ff-form .form-select,
.ff-form .btn,
.ff-form .input-group-text{ height: 44px; }

.ff-form .form-label{ margin-bottom:.25rem; } /* выравниваем линию меток */

/* нейтральный focus и без «зелёной» валидации */
.ff-form .form-control:focus,
.ff-form .form-select:focus{
  border-color: var(--bs-border-color);
  box-shadow: 0 0 0 .2rem rgba(13,110,253,.15);
}
.ff-form .form-control.is-valid,
.ff-form .form-select.is-valid,
.ff-form .was-validated .form-control:valid,
.ff-form .was-validated .form-select:valid{
  border-color: var(--bs-border-color) !important;
  background-image: none !important;
  box-shadow: none !important;
  padding-right: .75rem !important;
}

/* Стеглянная карточка формы */
.ff-form-card .card-body{
  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0));
  border-radius: 12px;
}

/* Дополнительные стили для модальных форм */
.ff-help{ margin-top:.25rem; font-size:.875rem; color: var(--bs-secondary-color); }

/* Единые радиусы у input-group */
.ff-form .input-group .form-control,
.ff-form .input-group .form-select,
.ff-form .input-group .input-group-text{
  border-radius: .5rem;
}

/* Светлая тема — чуть более заметная подложка */
:root[data-bs-theme="light"] .ff-form-card .card-body{
  background: linear-gradient(180deg, rgba(0,0,0,.02), rgba(0,0,0,0));
}

/* === Единый вид формы "Добавить расход" ===================== */
.ff-expense-form .form-control,
.ff-expense-form .form-select,
.ff-expense-form .btn,
.ff-expense-form .input-group-text{ height:44px; }

.ff-expense-form .form-label{ margin-bottom:.25rem; }

/* Скругления в input-group */
.ff-expense-form .input-group .form-control,
.ff-expense-form .input-group .form-select,
.ff-expense-form .input-group .input-group-text{ border-radius:.5rem; }

/* Нейтральный фокус */
.ff-expense-form .form-control:focus,
.ff-expense-form .form-select:focus{
  border-color: var(--bs-border-color);
  box-shadow: 0 0 0 .2rem rgba(13,110,253,.15);
}

/* Не показываем "красный/зелёный" до ввода/сабмита */
.ff-expense-form .form-control:invalid,
.ff-expense-form .form-select:invalid{
  border-color: var(--bs-border-color);
  box-shadow:none;
}

/* Показываем ошибку только когда поле тронули или форму отправили */
.ff-expense-form .dirty:invalid,
.ff-expense-form form.was-validated .form-control:invalid,
.ff-expense-form form.was-validated .form-select:invalid{
  border-color: var(--bs-danger);
  box-shadow: 0 0 0 .2rem rgba(var(--bs-danger-rgb), .15);
}

/* Подравниваем текст-пояснение */
.ff-expense-form .form-text{ margin-top:.25rem; }

/* === Модалки форм (доход) — ровные размеры и нейтральная валидация === */
.ff-modal .modal-body{ 
  padding-top: 1rem; 
  padding-bottom: 1rem;
}

.ff-modal .modal-dialog {
  max-width: 500px;
}

.ff-modal .modal-content {
  border-radius: 12px;
}

/* Унифицированная высота всех элементов формы */
#incomeModal .ff-income-form .form-control,
#incomeModal .ff-income-form .form-select,
#incomeModal .ff-income-form .btn,
#incomeModal .ff-income-form .input-group-text{ 
  height: 44px !important; 
  border-radius: .5rem !important;
}

#incomeModal .ff-income-form .form-label{ margin-bottom: .25rem; }

/* Скругления в input-group - более специфично */
#incomeModal .ff-income-form .input-group .form-control,
#incomeModal .ff-income-form .input-group .form-select,
#incomeModal .ff-income-form .input-group .input-group-text{ 
  border-radius: .5rem !important; 
}

/* КРИТИЧНО: НЕ показывать красный/зелёный до взаимодействия */
#incomeModal .ff-income-form .form-control:invalid,
#incomeModal .ff-income-form .form-select:invalid,
#incomeModal .ff-income-form input[type="month"]:invalid,
#incomeModal .ff-income-form input[type="text"]:invalid{
  border-color: var(--bs-border-color) !important;
  box-shadow: none !important;
  background-image: none !important;
}

/* Убираем любую зелёную подсветку */
#incomeModal .ff-income-form .form-control:valid,
#incomeModal .ff-income-form .form-select:valid,
#incomeModal .ff-income-form input[type="month"]:valid,
#incomeModal .ff-income-form input[type="text"]:valid{
  border-color: var(--bs-border-color) !important;
  box-shadow: none !important;
  background-image: none !important;
}

/* Показать ошибку только после взаимодействия или попытки сабмита */
#incomeModal .ff-income-form .form-control.dirty:invalid,
#incomeModal .ff-income-form .form-select.dirty:invalid,
#incomeModal .ff-income-form.was-validated .form-control:invalid,
#incomeModal .ff-income-form.was-validated .form-select:invalid{
  border-color: var(--bs-danger) !important;
  box-shadow: 0 0 0 .2rem rgba(var(--bs-danger-rgb), .15) !important;
}

/* Нейтральный фокус для всех полей */
#incomeModal .ff-income-form .form-control:focus,
#incomeModal .ff-income-form .form-select:focus,
#incomeModal .ff-income-form input[type="month"]:focus,
#incomeModal .ff-income-form input[type="text"]:focus{
  border-color: var(--bs-primary) !important;
  box-shadow: 0 0 0 .2rem rgba(13,110,253,.15) !important;
  background-image: none !important;
}
