{# templates/components/_balance_panel.html #}
{% set total_income = snapshot.total_income.amount if snapshot and snapshot.total_income else 0 %}
{% set total_spent = snapshot.total_spent.amount if snapshot and snapshot.total_spent else 0 %}
{% set total_limits = snapshot.total_limits.amount if snapshot and snapshot.total_limits else 0 %}
{% set balance = total_income - total_spent %}

<div class="hero mb-3">
  <div class="d-flex align-items-start justify-content-between gap-3 flex-wrap">
    <div>
      <h1>{{ balance | format_amount }} ₽</h1>
      <div class="meta">
        <!-- Десктопная версия - строчка -->
        <div class="d-none d-md-block">
          Доход: {{ total_income | format_amount }} ₽ ·
          Потрачено: {{ total_spent | format_amount }} ₽ ·
          Лимиты: {{ total_limits | format_amount }} ₽
        </div>
        <!-- Мобильная версия - список -->
        <div class="d-md-none hero-stats">
          <div class="hero-stat">
            <i class="bi bi-arrow-up-circle" aria-hidden="true"></i>
            <strong>{{ total_income | format_amount }} ₽</strong>
            <span>доход</span>
          </div>
          <div class="hero-stat">
            <i class="bi bi-wallet2" aria-hidden="true"></i>
            <strong>{{ total_spent | format_amount }} ₽</strong>
            <span>потрачено</span>
          </div>
          <div class="hero-stat">
            <i class="bi bi-bullseye" aria-hidden="true"></i>
            <strong>{{ total_limits | format_amount }} ₽</strong>
            <span>лимиты</span>
          </div>
        </div>
      </div>
    </div>

    <div class="ff-actions">
      <button type="button" class="ff-action ff-expense" data-bs-toggle="modal" data-bs-target="#expenseModal" aria-label="Добавить расход">
        <span class="ff-badge"><i class="bi bi-wallet2"></i></span>
        Расход
      </button>
      <button type="button" class="ff-action ff-income" data-bs-toggle="modal" data-bs-target="#incomeModal" aria-label="Добавить доход">
        <span class="ff-badge"><i class="bi bi-arrow-up-circle"></i></span>
        Доход
      </button>
    </div>
  </div>
</div>
