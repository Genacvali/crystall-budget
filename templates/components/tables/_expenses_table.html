<table class="table table-striped align-middle">
    <thead class="table-light">
        <tr>
            <th>Дата</th>
            <th>Категория</th>
            <th class="text-end">Сумма</th>
            <th>Комментарий</th>
            <th class="text-end">Действия</th>
        </tr>
    </thead>
    <tbody>
        {% for expense in expenses %}
        <tr>
            <td>{{ expense.date|format_date_with_day }}</td>
            <td>{{ expense.category_name }}</td>
            <td class="text-end fw-bold">{{ expense.amount|format_amount }} <span class="currency-display">{{ currency_symbol|default('₽') }}</span></td>
            <td>{{ expense.note or '' }}</td>
            <td class="text-end">
                <div class="d-inline-flex gap-2 justify-content-end">
                    <!-- Изменить (primary soft) -->
                    <div data-bs-toggle="tooltip" data-bs-title="Изменить">
                        <a href="{{ url_for('edit_expense', expense_id=expense.id) }}"
                           class="icon-btn icon-sm icon-primary icon-faded" aria-label="Изменить">
                            <i class="bi bi-pencil"></i>
                        </a>
                    </div>

                    <!-- Удалить (solid danger) -->
                    <form method="POST" action="{{ url_for('delete_expense', expense_id=expense.id) }}" class="d-inline">
                        <div data-bs-toggle="tooltip" data-bs-title="Удалить">
                            <button type="submit" class="icon-btn icon-sm icon-danger"
                                    data-confirm-delete="Удалить расход?\nДата: {{ expense.date|format_date_with_day }}\nКатегория: {{ expense.category_name }}\nСумма: {{ expense.amount|format_amount }}{% if expense.note %}\nЗаметка: {{ expense.note }}{% endif %}"
                                    aria-label="Удалить">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>