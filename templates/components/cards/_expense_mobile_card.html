<div class="expense-card">
    <div class="expense-row">
        <!-- Левая колонка: сумма и дата (72-88px) -->
        <div class="expense-amount">
            <div class="amount-text">{{ expense.amount|format_amount }} {{ currency_symbol|default('₽') }}</div>
            <div class="amount-date">{{ expense.date|format_date_with_day }}</div>
        </div>
        
        <!-- Центральная колонка: бейдж категории и заметка -->
        <div class="expense-details">
            <div class="expense-category">
                <span class="badge-ghost">{{ expense.category_name }}</span>
            </div>
            {% if expense.note %}
            <div class="expense-note">{{ expense.note }}</div>
            {% endif %}
        </div>
        
        <!-- Правая колонка: действия -->
        <div class="expense-actions">
            <div class="ff-iconbtn-group">
                <button data-modal-url="{{ url_for('budget.expense_edit_modal', expense_id=expense.id) }}"
                        data-modal-title="Редактировать расход" data-modal-size="md"
                        class="ff-iconbtn ff-iconbtn--edit" aria-label="Изменить" title="Изменить">
                    <i class="bi bi-pencil"></i>
                </button>
                <form method="POST" action="{{ url_for('budget.delete_expense', expense_id=expense.id) }}" class="d-inline">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                    <button type="submit" class="ff-iconbtn ff-iconbtn--delete"
                            data-confirm-delete="Удалить расход?\nДата: {{ expense.date|format_date_with_day }}\nКатегория: {{ expense.category_name }}\nСумма: {{ expense.amount|format_amount }}{% if expense.note %}\nЗаметка: {{ expense.note }}{% endif %}"
                            aria-label="Удалить" title="Удалить">
                        <i class="bi bi-trash3"></i>
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>