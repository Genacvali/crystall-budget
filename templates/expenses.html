{% extends "base.html" %}
{% block title %}Расходы — CrystalBudget{% endblock %}

{% block page_css %}
{# Expenses page uses unified app.css from base template #}
{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2">
    <h2 class="h4 m-0"><i class="bi bi-wallet2 text-danger me-2"></i>Мои расходы</h2>
    <button class="btn-hero icon-only" data-bs-toggle="collapse" data-bs-target="#addExpenseForm"
            title="Добавить расход" aria-label="Добавить расход">
        <i class="bi bi-plus-lg"></i>
        <span class="visually-hidden">Добавить расход</span>
    </button>
</div>

<!-- Навигация по месяцам -->
{% if month_data %}
<div class="period-filter">
    <div class="period-info">
        <i class="bi bi-calendar3 icon"></i>
        <span class="label">Период:</span>
        <strong class="value">{{ month_data.current_month_name }}</strong>
        {% if not month_data.is_current_month %}
            <span class="period-badge">Архив</span>
        {% endif %}
    </div>
    <div class="period-nav">
        <a href="{{ url_for('expenses', month=month_data.prev_month) }}" 
           class="period-btn" title="Предыдущий месяц">
            <i class="bi bi-chevron-left"></i>
        </a>
        <a href="{{ url_for('budget.expenses') }}" 
           class="period-btn current" title="Текущий месяц">
            <i class="bi bi-house"></i>
        </a>
        <a href="{{ url_for('expenses', month=month_data.next_month) }}" 
           class="period-btn" title="Следующий месяц">
            <i class="bi bi-chevron-right"></i>
        </a>
    </div>
</div>
{% endif %}

{% include 'components/forms/_add_expense_form.html' %}

<!-- Мобильные карточки -->
<div class="d-block d-md-none">
    {% for expense in expenses %}
    {% include 'components/cards/_expense_mobile_card.html' %}
    {% endfor %}
</div>

<!-- Настольная таблица -->
<div class="table-responsive d-none d-md-block">
    {% include 'components/tables/_expenses_table.html' %}
</div>

{% if not expenses %}
{% include 'components/states/_empty_expenses.html' %}
{% endif %}

{% include 'components/hints/_swipe_hint.html' %}

{% endblock %}

{% block scripts %}
<script type="module" src="{{ url_for('static', filename='js/entries/expenses.entry.js') }}"></script>
{% endblock %}
