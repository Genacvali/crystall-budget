{% extends "base.html" %}
{% block title %}Отчеты — CrystalBudget{% endblock %}

{% block content %}
<div class="row g-3 mb-4">
  <div class="col-md-4">
    <div class="ynab-card">
      <div class="ynab-card-body">
        <div class="muted">Поступления</div>
        <div class="amount positive" style="font-size:28px;">{{ inflow|format_amount }}</div>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="ynab-card">
      <div class="ynab-card-body">
        <div class="muted">Расходы</div>
        <div class="amount negative" style="font-size:28px;">{{ outflow|format_amount }}</div>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="ynab-card">
      <div class="ynab-card-body">
        <div class="muted">Накопления</div>
        <div class="amount {{ 'positive' if savings_rate >= 0 else 'negative' }}" style="font-size:28px;">
          {{ savings_rate|format_amount }}%
        </div>
      </div>
    </div>
  </div>
</div>

<div class="ynab-card mb-4">
  <div class="ynab-card-header">
    <h5 class="mb-0">Расходы по категориям</h5>
  </div>
  <div class="ynab-card-body">
    {% for category in category_breakdown %}
    <div class="d-flex justify-content-between align-items-center mb-2">
      <div>
        <div class="fw-semibold">{{ category.name }}</div>
        <div class="small text-muted">{{ category.spent|format_amount }} из {{ category.budget|format_amount }}</div>
      </div>
      <div class="text-end">
        <div class="amount negative">{{ category.spent|format_amount }}</div>
        <div class="progress" style="width: 100px; height: 6px;">
          <div class="progress-bar {{ 'bg-success' if category.progress <= 100 else 'bg-danger' }}" 
               style="width: {{ [category.progress, 100]|min }}%"></div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<div class="ynab-card">
  <div class="ynab-card-header">
    <h5 class="mb-0">Тренды по месяцам</h5>
  </div>
  <div class="ynab-card-body">
    <div style="height: 300px; display: flex; align-items: center; justify-content: center;">
      <div class="text-muted">
        <i class="bi bi-bar-chart" style="font-size: 3rem;"></i>
        <div class="mt-2">График в разработке</div>
      </div>
    </div>
  </div>
</div>

{% endblock %}